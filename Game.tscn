[gd_scene load_steps=12 format=1]

[ext_resource path="res://Game.gd" type="Script" id=1]
[ext_resource path="res://MainPanel.gd" type="Script" id=2]
[ext_resource path="res://TaskControl.gd" type="Script" id=3]
[ext_resource path="res://ReactorPanel.gd" type="Script" id=4]
[ext_resource path="res://assets/l0.tex" type="Texture" id=5]
[ext_resource path="res://ReactorControl.gd" type="Script" id=6]
[ext_resource path="res://assets/lcd.fnt" type="BitmapFont" id=7]
[ext_resource path="res://RodPanel.gd" type="Script" id=8]
[ext_resource path="res://RodControl.gd" type="Script" id=9]

[sub_resource type="StyleBoxFlat" id=1]

content_margin/left = -1.0
content_margin/right = -1.0
content_margin/top = -1.0
content_margin/bottom = -1.0
bg_color = Color( 0.0784314, 0.0745098, 0.0901961, 1 )
light_color = Color( 0.0784314, 0.0745098, 0.0901961, 1 )
dark_color = Color( 0.0784314, 0.0745098, 0.0901961, 1 )
border_size = 0
border_blend = true
draw_bg = true

[sub_resource type="StyleBoxFlat" id=2]

content_margin/left = -1.0
content_margin/right = -1.0
content_margin/top = -1.0
content_margin/bottom = -1.0
bg_color = Color( 0.0627451, 0.0588235, 0.0705882, 1 )
light_color = Color( 0.0627451, 0.0588235, 0.0705882, 1 )
dark_color = Color( 0.0627451, 0.0588235, 0.0705882, 1 )
border_size = 0
border_blend = true
draw_bg = true

[node name="Game" type="Node"]

script/script = ExtResource( 1 )

[node name="MainPanel" type="Panel" parent="."]

anchor/right = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 60.0
script/script = ExtResource( 2 )

[node name="Time" type="Panel" parent="MainPanel"]

editor/display_folded = true
anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 200.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0

[node name="Button" type="Button" parent="MainPanel/Time"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 60.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
toggle_mode = true
enabled_focus_mode = 2
shortcut = null
text = ">"
flat = false

[node name="HSlider" type="HSlider" parent="MainPanel/Time"]

anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 4.0
margin/top = 0.0
margin/right = 64.0
margin/bottom = 0.0
range/min = 1.0
range/max = 4.0
range/step = 1.0
range/page = 0.0
range/value = 1.0
range/exp_edit = false
range/rounded = true
tick_count = 4
ticks_on_borders = true
focus_mode = 2

[node name="Current" type="Label" parent="MainPanel/Time"]

anchor/top = 3
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 60.0
margin/bottom = 0.0
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="HelpBtn" type="Button" parent="MainPanel"]

anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 80.0
margin/bottom = 0.0
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "Help"
flat = false

[node name="ResetBtn" type="Button" parent="MainPanel"]

anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 80.0
margin/top = 0.0
margin/right = 160.0
margin/bottom = 0.0
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "Reset"
flat = false

[node name="TaskControl" type="Label" parent="MainPanel"]

anchor/left = 3
anchor/top = 3
anchor/right = 3
anchor/bottom = 3
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 200.0
margin/top = 30.0
margin/right = -200.0
margin/bottom = -30.0
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1
script/script = ExtResource( 3 )

[node name="LeftPanel" type="TabContainer" parent="."]

editor/display_folded = true
anchor/right = 3
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 60.0
margin/right = 0.0
margin/bottom = 0.0
tab_align = 1
tabs_visible = true

[node name="ReactorPanel" type="Control" parent="LeftPanel"]

editor/display_folded = true
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 4.0
margin/top = 32.0
margin/right = 4.0
margin/bottom = 4.0
script/script = ExtResource( 4 )

[node name="Panel" type="Panel" parent="LeftPanel/ReactorPanel"]

anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 100.0

[node name="Indicator" type="TextureFrame" parent="LeftPanel/ReactorPanel"]

editor/display_folded = true
visibility/visible = false
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 40.0
margin/bottom = 40.0
expand = true
stretch_mode = 0

[node name="Label" type="Label" parent="LeftPanel/ReactorPanel/Indicator"]

anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
align = 1
valign = 1
clip_text = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Lamp" type="TextureFrame" parent="LeftPanel/ReactorPanel/Indicator"]

anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
texture = ExtResource( 5 )
expand = true
stretch_mode = 0

[node name="PowerDisp" type="CheckButton" parent="LeftPanel/ReactorPanel"]

anchor/top = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 138.0
margin/right = 115.0
margin/bottom = 102.0
toggle_mode = true
enabled_focus_mode = 2
shortcut = null
text = "power"
flat = false
align = 0

[node name="ReactorControl" type="Panel" parent="LeftPanel/ReactorPanel"]

editor/display_folded = true
anchor/top = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 96.0
margin/right = 0.0
margin/bottom = 0.0
script/script = ExtResource( 6 )

[node name="Reactivity" type="Panel" parent="LeftPanel/ReactorPanel/ReactorControl"]

editor/display_folded = true
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 140.0
margin/bottom = 28.0

[node name="Panel" type="Panel" parent="LeftPanel/ReactorPanel/ReactorControl/Reactivity"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 70.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
custom_styles/panel = SubResource( 1 )

[node name="Value" type="Label" parent="LeftPanel/ReactorPanel/ReactorControl/Reactivity"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 70.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
custom_fonts/font = ExtResource( 7 )
align = 1
valign = 1
clip_text = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Label" type="Label" parent="LeftPanel/ReactorPanel/ReactorControl/Reactivity"]

anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 70.0
margin/bottom = 0.0
text = "React"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Period" type="Panel" parent="LeftPanel/ReactorPanel/ReactorControl"]

editor/display_folded = true
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 32.0
margin/right = 140.0
margin/bottom = 60.0

[node name="Panel" type="Panel" parent="LeftPanel/ReactorPanel/ReactorControl/Period"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 70.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
custom_styles/panel = SubResource( 1 )

[node name="Value" type="Label" parent="LeftPanel/ReactorPanel/ReactorControl/Period"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 70.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
custom_fonts/font = ExtResource( 7 )
align = 1
valign = 1
clip_text = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Label" type="Label" parent="LeftPanel/ReactorPanel/ReactorControl/Period"]

anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 70.0
margin/bottom = 0.0
text = "Period"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Power" type="Panel" parent="LeftPanel/ReactorPanel/ReactorControl"]

editor/display_folded = true
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 64.0
margin/right = 140.0
margin/bottom = 92.0

[node name="Panel" type="Panel" parent="LeftPanel/ReactorPanel/ReactorControl/Power"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 70.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
custom_styles/panel = SubResource( 1 )

[node name="Value" type="Label" parent="LeftPanel/ReactorPanel/ReactorControl/Power"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 70.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0
custom_fonts/font = ExtResource( 7 )
align = 1
valign = 1
clip_text = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Label" type="Label" parent="LeftPanel/ReactorPanel/ReactorControl/Power"]

anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 70.0
margin/bottom = 0.0
text = "Power"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Button" type="Button" parent="LeftPanel/ReactorPanel/ReactorControl"]

anchor/left = 1
anchor/top = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 60.0
margin/top = 40.0
margin/right = 0.0
margin/bottom = 0.0
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "EP"
flat = false

[node name="Button 2" type="Button" parent="LeftPanel/ReactorPanel/ReactorControl"]

focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 446.0
margin/top = 20.0
margin/right = 504.0
margin/bottom = 53.0
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "RU"
flat = false

[node name="RodPanel" type="Control" parent="."]

editor/display_folded = true
anchor/left = 3
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 60.0
margin/right = 0.0
margin/bottom = 100.0
script/script = ExtResource( 8 )

[node name="Panel" type="Panel" parent="RodPanel"]

anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0

[node name="RodBtn" type="Panel" parent="RodPanel"]

editor/display_folded = true
visibility/visible = false
rect/min_size = Vector2( 40, 40 )
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 12.0
margin/bottom = 20.0
custom_styles/panel = SubResource( 2 )

[node name="Button" type="Button" parent="RodPanel/RodBtn"]

anchor/top = 2
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.38
margin/right = 0.0
margin/bottom = 0.0
toggle_mode = true
enabled_focus_mode = 2
shortcut = null
flat = false

[node name="Label" type="Label" parent="RodPanel/RodBtn"]

anchor/right = 1
anchor/bottom = 2
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.475
custom_fonts/font = ExtResource( 7 )
text = "123"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="RodControl" type="Panel" parent="."]

editor/display_folded = true
anchor/left = 3
anchor/top = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 100.0
margin/right = 0.0
margin/bottom = 0.0
script/script = ExtResource( 9 )

[node name="Rod" type="Panel" parent="RodControl"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 200.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.0

[node name="Up" type="Button" parent="RodControl/Rod"]

anchor/left = 1
anchor/right = 1
anchor/bottom = 2
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 60.0
margin/top = 0.0
margin/right = 0.0
margin/bottom = 0.5
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "^"
flat = false

[node name="Down" type="Button" parent="RodControl/Rod"]

anchor/left = 1
anchor/top = 2
anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 60.0
margin/top = 0.5
margin/right = 0.0
margin/bottom = 0.0
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "v"
flat = false

[node name="Id" type="Label" parent="RodControl/Rod"]

focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 0.0
margin/right = 40.0
margin/bottom = 14.0
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Pos" type="Label" parent="RodControl/Rod"]

focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 0.0
margin/top = 20.0
margin/right = 40.0
margin/bottom = 34.0
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Shift" type="Button" parent="RodControl/Rod"]

anchor/top = 1
anchor/bottom = 1
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 50.0
margin/right = 50.0
margin/bottom = 0.0
toggle_mode = true
enabled_focus_mode = 2
shortcut = null
text = "SH"
flat = false

[node name="Help" type="WindowDialog" parent="."]

visibility/visible = false
anchor/left = 3
anchor/top = 3
anchor/right = 3
anchor/bottom = 3
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 264.0
margin/top = 164.0
margin/right = -264.0
margin/bottom = -186.0
popup/exclusive = true
window/title = "Help"

[node name="Label" type="Label" parent="Help"]

anchor/right = 1
anchor/bottom = 1
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
size_flags/stretch_ratio = 0.0
margin/left = 4.0
margin/top = 4.0
margin/right = 4.0
margin/bottom = 4.0
text = "Welcome to gd_pwr game!

This is a simple game about controlling a nuclear reactor.

Your task is to increase and hold reactor's thermal power (signed as \"Power\", on down left panel) in range from 18000 to 20000. You should hold this power during 5 in-game minutes.

To control reactor's power you need to move rods up and down:
-Choose a control rod on right panel
-To increase the power in an area move a control rod up by clicking button ( ^ )(down right panel). To decrease the power move the control rod down by clicking ( v )

Look after the period of the reactor, period less than 5-10 seconds is dangerous and may lead to an uncontrollable power growth

Also, you can use keyboard <W> (>) and <S> (<) keys to move control rod. You can use <0> and <9> to move rods on 10 positions. EP button (<E>) down control rods to reduce reactor power
"
autowrap = true
clip_text = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Timer" type="Timer" parent="."]

process_mode = 1
wait_time = 1.0
one_shot = false
autostart = false

[connection signal="pressed" from="MainPanel/Time/Button" to="MainPanel" method="_on_Button_pressed"]

[connection signal="value_changed" from="MainPanel/Time/HSlider" to="MainPanel" method="_on_HSlider_value_changed"]

[connection signal="pressed" from="MainPanel/HelpBtn" to="MainPanel" method="_on_HelpBtn_pressed"]

[connection signal="pressed" from="MainPanel/ResetBtn" to="MainPanel" method="_on_ResetBtn_pressed"]

[connection signal="toggled" from="LeftPanel/ReactorPanel/PowerDisp" to="LeftPanel/ReactorPanel" method="_on_PowerDisp_toggled"]

[connection signal="pressed" from="LeftPanel/ReactorPanel/ReactorControl/Button" to="LeftPanel/ReactorPanel/ReactorControl" method="_on_Button_pressed"]

[connection signal="pressed" from="LeftPanel/ReactorPanel/ReactorControl/Button 2" to="LeftPanel/ReactorPanel/ReactorControl" method="_on_Button_2_pressed"]

[connection signal="pressed" from="RodControl/Rod/Up" to="RodControl" method="_on_RodUp_pressed"]

[connection signal="pressed" from="RodControl/Rod/Down" to="RodControl" method="_on_RodDown_pressed"]

[connection signal="pressed" from="RodControl/Rod/Shift" to="RodControl" method="_on_Shift_pressed"]

[connection signal="timeout" from="Timer" to="." method="_on_Timer_timeout"]


